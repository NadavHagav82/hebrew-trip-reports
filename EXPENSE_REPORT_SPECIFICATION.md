# ××¤×™×•×Ÿ ××¤×•×¨×˜ - ×ª×”×œ×™×š ×™×¦×™×¨×ª ×“×•×— × ×¡×™×¢×•×ª

## ×ª×•×›×Ÿ ×¢× ×™×™× ×™×
1. [×¡×§×™×¨×” ×›×œ×œ×™×ª](#×¡×§×™×¨×”-×›×œ×œ×™×ª)
2. [×©×œ×‘ 1: ×¤×ª×™×—×ª ×“×•×— ×—×“×©](#×©×œ×‘-1-×¤×ª×™×—×ª-×“×•×—-×—×“×©)
3. [×©×œ×‘ 2: ××™×œ×•×™ ×¤×¨×˜×™ ×”× ×¡×™×¢×”](#×©×œ×‘-2-××™×œ×•×™-×¤×¨×˜×™-×”× ×¡×™×¢×”)
4. [×©×œ×‘ 3: ×”×’×“×¨×ª ××©×´×œ ×™×•××™](#×©×œ×‘-3-×”×’×“×¨×ª-××©×œ-×™×•××™)
5. [×©×œ×‘ 4: ×”×•×¡×¤×ª ×”×•×¦××•×ª](#×©×œ×‘-4-×”×•×¡×¤×ª-×”×•×¦××•×ª)
6. [×©×œ×‘ 5: ×”×¢×œ××ª ×§×‘×œ×•×ª ×•× ×™×ª×•×— AI](#×©×œ×‘-5-×”×¢×œ××ª-×§×‘×œ×•×ª-×•× ×™×ª×•×—-ai)
7. [×©×œ×‘ 6: ×©××™×¨×” ××•×˜×•××˜×™×ª](#×©×œ×‘-6-×©××™×¨×”-××•×˜×•××˜×™×ª)
8. [×©×œ×‘ 7: ×”×¤×§×” ×•×©×œ×™×—×”](#×©×œ×‘-7-×”×¤×§×”-×•×©×œ×™×—×”)
9. [××‘× ×” ×”× ×ª×•× ×™×](#××‘× ×”-×”× ×ª×•× ×™×)
10. [Edge Functions](#edge-functions)
11. [×–×¨×™××ª ×”× ×ª×•× ×™×](#×–×¨×™××ª-×”× ×ª×•× ×™×)

---

## ×¡×§×™×¨×” ×›×œ×œ×™×ª

### ×ª×™××•×¨ ×”×ª×”×œ×™×š
×ª×”×œ×™×š ×™×¦×™×¨×ª ×“×•×— × ×¡×™×¢×•×ª ×××¤×©×¨ ×œ×¢×•×‘×“ ×œ×ª×¢×“ ××ª ×›×œ ×”×”×•×¦××•×ª ×× ×¡×™×¢×” ×¢×¡×§×™×ª, ×œ×¦×¨×£ ×§×‘×œ×•×ª, ×•×œ×”×’×™×© ×œ××™×©×•×¨ ×× ×”×œ.

### × ×§×•×“×•×ª ×›× ×™×¡×”
- `/reports/new` - ×™×¦×™×¨×ª ×“×•×— ×—×“×©
- `/reports/:id/edit` - ×¢×¨×™×›×ª ×“×•×— ×§×™×™×

### ×¡×˜×˜×•×¡×™× ××¤×©×¨×™×™×
| ×¡×˜×˜×•×¡ | ×ª×™××•×¨ |
|--------|--------|
| `draft` | ×˜×™×•×˜×” - × ×©××¨ ××•×˜×•××˜×™×ª |
| `open` | ×¤×ª×•×— - × ×©××¨ ×™×“× ×™×ª |
| `pending_approval` | ×××ª×™×Ÿ ×œ××™×©×•×¨ ×× ×”×œ |
| `closed` | ×¡×’×•×¨ - ××•×©×¨ |

---

## ×©×œ×‘ 1: ×¤×ª×™×—×ª ×“×•×— ×—×“×©

### × ×ª×™×‘: `/reports/new`
### ×§×•×‘×¥: `src/pages/reports/NewReport.tsx`

### ×¤×¢×•×œ×•×ª ×‘×˜×¢×™× ×ª ×”×¢××•×“:
1. **×‘×“×™×§×ª ××©×ª××© ××—×•×‘×¨** - ×× ××™×Ÿ ××©×ª××©, ×œ× × ×™×ª×Ÿ ×œ×™×¦×•×¨ ×“×•×—
2. **×˜×¢×™× ×ª ×©×¢×¨×™ ×—×œ×™×¤×™×Ÿ** - ×§×¨×™××” ×œ-Edge Function `get-exchange-rates`
3. **×× ×§×™×™× ID ×‘× ×ª×™×‘** - ×˜×¢×™× ×ª ×“×•×— ×§×™×™× ×œ×¢×¨×™×›×”

### State Variables:
```typescript
// ×¤×¨×˜×™ × ×¡×™×¢×”
tripDestination: string           // ××“×™× ×ª ×”×™×¢×“
tripStartDate: string             // ×ª××¨×™×š ×”×ª×—×œ×” (YYYY-MM-DD)
tripEndDate: string               // ×ª××¨×™×š ×¡×™×•× (YYYY-MM-DD)
tripPurpose: string               // ××˜×¨×ª ×”× ×¡×™×¢×”
reportNotes: string               // ×”×¢×¨×•×ª ×›×œ×œ×™×•×ª

// ××©"×œ
dailyAllowance: number            // ×¡×›×•× ××©"×œ ×™×•××™ ($)
includeDailyAllowance: boolean | null  // ×”×× ×œ×›×œ×•×œ ××©"×œ
allowanceType: 'full' | 'custom' | 'none' | null  // ×¡×•×’ ×”××©"×œ
customAllowanceDays: number       // ××¡×¤×¨ ×™××™× ××•×ª××

// ×”×•×¦××•×ª
expenses: Expense[]               // ××¢×¨×š ×”×”×•×¦××•×ª
expandedExpense: string | null    // ID ×©×œ ×”×•×¦××” ×¤×ª×•×—×”

// ×©××™×¨×” ××•×˜×•××˜×™×ª
autoSaving: boolean               // ×”×× ××ª×‘×¦×¢×ª ×©××™×¨×”
lastAutoSave: Date | null         // ×–××Ÿ ×©××™×¨×” ××—×¨×•×Ÿ
reportId: string | null           // ID ×”×“×•×— (×œ××—×¨ ×©××™×¨×” ×¨××©×•× ×”)
```

---

## ×©×œ×‘ 2: ××™×œ×•×™ ×¤×¨×˜×™ ×”× ×¡×™×¢×”

### ×©×“×•×ª ×—×•×‘×”:

#### 1. ××“×™× ×ª ×”×™×¢×“ (tripDestination)
- **×¡×•×’**: `string`
- **×•×œ×™×“×¦×™×”**: ×—×•×‘×”, ×œ× ×¨×™×§
- **×”×©×¤×¢×”**: ×§×•×‘×¢ ××ª ×¡×›×•× ×”××©"×œ ×”×™×•××™
- **×“×•×’××”**: "××¨×”×´×‘", "×‘×•×œ×’×¨×™×”", "×™×¤×Ÿ"

#### 2. ×ª××¨×™×š ×”×ª×—×œ×” (tripStartDate)
- **×¡×•×’**: `string` (YYYY-MM-DD)
- **×•×œ×™×“×¦×™×”**: ×—×•×‘×”
- **UI**: Date picker

#### 3. ×ª××¨×™×š ×¡×™×•× (tripEndDate)
- **×¡×•×’**: `string` (YYYY-MM-DD)
- **×•×œ×™×“×¦×™×”**: ×—×•×‘×”, >= ×ª××¨×™×š ×”×ª×—×œ×”
- **UI**: Date picker ×¢× min ××•×’×‘×œ

#### 4. ××˜×¨×ª ×”× ×¡×™×¢×” (tripPurpose)
- **×¡×•×’**: `string`
- **×•×œ×™×“×¦×™×”**: ×—×•×‘×”
- **UI**: Textarea

### ×©×“×•×ª ××•×¤×¦×™×•× ×œ×™×™×:

#### 5. ×”×¢×¨×•×ª ×›×œ×œ×™×•×ª (reportNotes)
- **×¡×•×’**: `string`
- **×•×œ×™×“×¦×™×”**: ××•×¤×¦×™×•× ×œ×™
- **UI**: Textarea

### ×—×™×©×•×‘×™× ××•×˜×•××˜×™×™×:

#### ××©×š ×”× ×¡×™×¢×”
```typescript
const calculateTripDuration = () => {
  const start = new Date(tripStartDate);
  const end = new Date(tripEndDate);
  const diffTime = Math.abs(end.getTime() - start.getTime());
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
};
```

---

## ×©×œ×‘ 3: ×”×’×“×¨×ª ××©×´×œ ×™×•××™

### ××“×™× ×•×ª ×¢× ××©"×œ ×’×‘×•×” ($125/×™×•×):
```typescript
const highAllowanceCountries = [
  '××¨×”"×‘', '××¨×”×‘', '××¨×”×´×‘', '×××¨×™×§×”',
  '×§× ×“×”', '×‘×¨×™×˜× ×™×”', '×× ×’×œ×™×”', '××•×¡×˜×¨×œ×™×”',
  '× ×™×• ×–×™×œ× ×“', '×™×¤×Ÿ', '×¡×™× ×’×¤×•×¨', '×”×•× ×’ ×§×•× ×’',
  '×©×•×•×™×™×¥', '× ×•×¨×‘×’×™×”', '×“× ××¨×§', '×©×•×•×“×™×”',
  '××™×¡×œ× ×“', '×œ×•×§×¡××‘×•×¨×’'
];
```

### ×›×œ ×©××¨ ×”××“×™× ×•×ª: $100/×™×•×

### ××¤×©×¨×•×™×•×ª ×‘×—×™×¨×”:

#### 1. ××©"×œ ×œ×›×œ ×™××™ ×”× ×¡×™×¢×” (full)
- ×¡×›×•× Ã— ××¡×¤×¨ ×™××™ ×”× ×¡×™×¢×”

#### 2. ××©"×œ ×œ××¡×¤×¨ ×™××™× ×¡×¤×¦×™×¤×™ (custom)
- ×¡×›×•× Ã— ××¡×¤×¨ ×™××™× ××•×ª×× (1 ×¢×“ ××¡×¤×¨ ×™××™ ×”× ×¡×™×¢×”)

#### 3. ×œ×œ× ××©"×œ (none)
- ×œ× × ×•×¡×£ ××©"×œ ×œ×“×•×—

### ×•×œ×™×“×¦×™×”:
- **× ×“×¨×©×ª ×”×—×œ×˜×”** - ×œ× × ×™×ª×Ÿ ×œ×”×¤×™×§ ×“×•×— ×œ×œ× ×‘×—×™×¨×”

---

## ×©×œ×‘ 4: ×”×•×¡×¤×ª ×”×•×¦××•×ª

### ××‘× ×” ×”×•×¦××” (Expense Interface):
```typescript
interface Expense {
  id: string;                    // ID ××§×•××™ (×œ× ×™×”×•×œ UI)
  dbId?: string;                 // ID ×‘×‘×¡×™×¡ ×”× ×ª×•× ×™×
  expense_date: string;          // ×ª××¨×™×š ×”×”×•×¦××”
  category: ExpenseCategory;     // ×§×˜×’×•×¨×™×”
  description: string;           // ×ª×™××•×¨
  amount: number;                // ×¡×›×•× ×‘××˜×‘×¢ ××§×•×¨×™
  currency: string;              // ××˜×‘×¢
  amount_in_ils: number;         // ×¡×›×•× ×‘×©"×—
  receipts: ReceiptFile[];       // ×§×‘×œ×•×ª ××¦×•×¨×¤×•×ª
  notes?: string;                // ×”×¢×¨×•×ª
  payment_method: PaymentMethod; // ×××¦×¢×™ ×ª×©×œ×•×
  approval_status?: ApprovalStatus;  // ×¡×˜×˜×•×¡ ××™×©×•×¨
  manager_comment?: string;      // ×”×¢×¨×ª ×× ×”×œ
  dateFromReceipt?: boolean;     // ×”×× ×”×ª××¨×™×š ××”×§×‘×œ×”
  originalExtractedDate?: string; // ×ª××¨×™×š ××§×•×¨×™ ×-AI
  analysisLogId?: string;        // ID ×œ×•×’ ×”× ×™×ª×•×—
}
```

### ×§×˜×’×•×¨×™×•×ª (ExpenseCategory):
| ×§×˜×’×•×¨×™×” | ×ª×•×•×™×ª | ××™×™×§×•×Ÿ | ×¦×‘×¢ |
|---------|--------|--------|------|
| `flights` | ×˜×™×¡×•×ª | âœˆï¸ Plane | ×›×—×•×œ |
| `accommodation` | ×œ×™× ×” / ×—×“×¨×™ ×™×©×™×‘×•×ª | ğŸ¨ Hotel | ×¡×’×•×œ |
| `food` | ××•×›×œ ×•××™×¨×•×— | ğŸ½ï¸ Utensils | ×™×¨×•×§ |
| `transportation` | ×ª×—×‘×•×¨×” ××§×•××™×ª | ğŸš— Car | ×›×ª×•× |
| `miscellaneous` | ×©×•× ×•×ª | ğŸ“¦ Package | ××¤×•×¨ |

### ×××¦×¢×™ ×ª×©×œ×•× (PaymentMethod):
| ×¢×¨×š | ×ª×•×•×™×ª | ××™×™×§×•×Ÿ |
|-----|--------|--------|
| `company_card` | ×›×¨×˜×™×¡ ×—×‘×¨×” | ğŸ’³ CreditCard |
| `out_of_pocket` | ××›×™×¡ ×”×¢×•×‘×“ | ğŸ‘› Wallet |

### ××˜×‘×¢×•×ª × ×ª××›×™×:
```typescript
// ××™×¨×•×¤×”
USD, EUR, GBP, CHF, PLN, BGN, CZK, HUF, RON, SEK, NOK, DKK, ISK, HRK, RSD, UAH, TRY

// ×××¨×™×§×” ×œ×˜×™× ×™×ª
CAD, MXN, BRL, ARS, CLP, COP, PEN, UYU

// ××–×¨×— ×¨×—×•×§
JPY, CNY, KRW, HKD, SGD, THB, MYR, IDR, PHP, VND, TWD, INR

// ××¤×¨×™×§×”
ZAR, EGP, MAD, TND, KES, NGN, GHS

// ××•×¡×˜×¨×œ×™×” ×•××•×§×™×× ×™×”
AUD, NZD

// ××–×¨×— ×ª×™×›×•×Ÿ
ILS, AED, SAR, QAR, KWD, JOD
```

### ×©×“×•×ª ×—×•×‘×” ×‘×”×•×¦××”:
1. **×ª××¨×™×š** - `expense_date`
2. **×ª×™××•×¨** - `description` (×œ× ×¨×™×§)
3. **×¡×›×•×** - `amount` (> 0)
4. **×××¦×¢×™ ×ª×©×œ×•×** - `payment_method`

### ×¤×•× ×§×¦×™×•×ª ×¢×“×›×•×Ÿ:
```typescript
// ×”×•×¡×¤×ª ×”×•×¦××” ×—×“×©×”
const addExpense = () => {
  const newExpense: Expense = {
    id: Date.now().toString(),
    expense_date: '',
    category: 'miscellaneous',
    description: '',
    amount: 0,
    currency: 'USD',
    amount_in_ils: 0,
    receipts: [],
    notes: '',
    payment_method: '',
  };
  setExpenses(prev => [...prev, newExpense]);
};

// ×¢×“×›×•×Ÿ ×”×•×¦××”
const updateExpense = (id: string, field: keyof Expense, value: any) => {
  setExpenses(prev => prev.map(exp => {
    if (exp.id === id) {
      const updated = { ...exp, [field]: value };
      // ×”××¨×” ××•×˜×•××˜×™×ª ×œ×©"×—
      if (field === 'amount' || field === 'currency') {
        updated.amount_in_ils = amount * currencyRates[currency];
      }
      return updated;
    }
    return exp;
  }));
};

// ××—×™×§×ª ×”×•×¦××”
const removeExpense = (id: string) => {
  // ×©××™×¨×ª DB ID ×œ××—×™×§×” ×‘×©××™×¨×” ×”×‘××”
  if (expense.dbId) {
    deletedExpenseDbIds.current.add(expense.dbId);
  }
  setExpenses(prev => prev.filter(exp => exp.id !== id));
};
```

### ×–×™×”×•×™ ×›×¤×™×œ×•×™×•×ª:
```typescript
const findDuplicates = (expense: Expense) => {
  // ×‘×“×™×§×” 1: ×ª××¨×™×š + ×¡×›×•× + ××˜×‘×¢ ×–×”×™×
  // ×‘×“×™×§×” 2: ×ª××¨×™×š + ×§×˜×’×•×¨×™×” + ×¡×›×•× ×“×•××” (Â±5%)
};
```

---

## ×©×œ×‘ 5: ×”×¢×œ××ª ×§×‘×œ×•×ª ×•× ×™×ª×•×— AI

### ××‘× ×” ×§×•×‘×¥ ×§×‘×œ×”:
```typescript
interface ReceiptFile {
  localId?: string;        // ID ××§×•××™
  file?: File;             // ×§×•×‘×¥ ×—×“×© (×œ× ×”×•×¢×œ×” ×¢×“×™×™×Ÿ)
  preview: string;         // URL ×œ×ª×¦×•×’×” ××§×“×™××”
  existingId?: string;     // ID ×‘×‘×¡×™×¡ ×”× ×ª×•× ×™×
  fileUrl?: string;        // × ×ª×™×‘ ×‘××—×¡×•×Ÿ
  fileName?: string;       // ×©× ×”×§×•×‘×¥
  fileType?: string;       // ×¡×•×’ ×”×§×•×‘×¥
  fileSize?: number;       // ×’×•×“×œ ×‘×‘×™×™×˜×™×
  uploading?: boolean;     // ×”×× ×‘×ª×”×œ×™×š ×”×¢×œ××”
  analyzing?: boolean;     // ×”×× ×‘×ª×”×œ×™×š × ×™×ª×•×—
  analyzed?: boolean;      // ×”×× × ×•×ª×—
}
```

### ××¤×©×¨×•×™×•×ª ×”×¢×œ××”:
1. **×‘×—×™×¨×ª ×§×•×‘×¥** - ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ×”×¢×œ××”
2. **×¦×™×œ×•× ××”××¦×œ××”** - ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ××¦×œ××”

### ×¡×•×’×™ ×§×‘×¦×™× × ×ª××›×™×:
- ×ª××•× ×•×ª: JPEG, JPG, PNG, GIF, WebP, HEIC
- ××¡××›×™×: PDF

### ×’×•×“×œ ××§×¡×™××œ×™: 10MB

### ×ª×”×œ×™×š × ×™×ª×•×— AI:

#### Edge Function: `analyze-receipt`
**×§×œ×˜:**
```typescript
{
  imageBase64: string;      // ×ª××•× ×” ×‘×¤×•×¨××˜ Base64
  tripDestination: string;  // ××“×™× ×ª ×”×™×¢×“
}
```

**×¤×œ×˜:**
```typescript
{
  date: string;         // YYYY-MM-DD
  amount: number;       // ×¡×›×•×
  currency: string;     // ××˜×‘×¢
  category: string;     // ×§×˜×’×•×¨×™×”
  description: string;  // ×ª×™××•×¨
}
```

### ×œ×•×’×™×§×ª × ×™×ª×•×—:

#### ×–×™×”×•×™ ××˜×‘×¢:
1. ×—×™×¤×•×© ×¡××œ ××˜×‘×¢ ×‘×§×‘×œ×” ($, â‚¬, Â£, â‚ª, ×•×›×•')
2. ×× ×œ× × ××¦× - ×©×™××•×© ×‘××˜×‘×¢ ××§×•××™ ×œ×¤×™ ××“×™× ×ª ×”×™×¢×“
3. ×‘×¨×™×¨×ª ××—×“×œ: EUR

#### ×–×™×”×•×™ ×ª××¨×™×š:
- ×¤×•×¨××˜ DD/MM/YYYY ×œ×¨×•×‘ ×”×¢×•×œ×
- ×¤×•×¨××˜ MM/DD/YYYY ×œ××¨×”"×‘ ×‘×œ×‘×“
- ×©× ×” ×“×•-×¡×¤×¨×ª×™×ª: 25 = 2025

#### ×§×˜×’×•×¨×™×–×¦×™×” ××•×˜×•××˜×™×ª:
```typescript
// flights: ×›×¨×˜×™×¡×™ ×˜×™×¡×”, airline, flight
// accommodation: ××œ×•×Ÿ, hotel, room
// food: ××¡×¢×“×”, restaurant, coffee, meal
// transportation: ××•× ×™×ª, uber, taxi, parking
// miscellaneous: ×›×œ ×”×©××¨
```

### ×œ×•×’ × ×™×ª×•×—:
× ×©××¨ ×‘×˜×‘×œ×ª `receipt_analysis_logs`:
```typescript
{
  user_id: string;
  report_id: string;
  image_file_name: string;
  image_file_size: number;
  extracted_date: string;
  extracted_amount: number;
  extracted_currency: string;
  extracted_category: string;
  extracted_description: string;
  raw_ai_response: JSON;
  trip_destination: string;
  device_info: string;
}
```

---

## ×©×œ×‘ 6: ×©××™×¨×” ××•×˜×•××˜×™×ª

### ×× ×’× ×•×Ÿ Auto-Save:

#### ×˜×¨×™×’×¨×™×:
1. ×©×™× ×•×™ ×‘×¤×¨×˜×™ ×”× ×¡×™×¢×”
2. ×©×™× ×•×™ ×‘××©"×œ
3. ×©×™× ×•×™ ×‘×”×•×¦××•×ª
4. ××¢×‘×¨ ×œ×˜××‘ ××—×¨ (visibilitychange)
5. ×™×¦×™××” ××”××¤×œ×™×§×¦×™×” (beforeunload)
6. blur ××”×—×œ×•×Ÿ

#### Debounce: 1.5 ×©× ×™×•×ª

### ×ª×”×œ×™×š ×”×©××™×¨×”:
```typescript
const autoSaveReport = async () => {
  // 1. ×× ××™×Ÿ reportId - ×™×¦×™×¨×ª ×“×•×— ×—×“×©
  if (!reportId) {
    const { data } = await supabase
      .from('reports')
      .insert({...})
      .select()
      .single();
    setReportId(data.id);
    window.history.replaceState(null, '', `/reports/${data.id}/edit`);
  } else {
    // 2. ×¢×“×›×•×Ÿ ×“×•×— ×§×™×™×
    await supabase.from('reports').update({...}).eq('id', reportId);
  }

  // 3. ××—×™×§×ª ×”×•×¦××•×ª ×©× ××—×§×•
  if (deletedExpenseDbIds.size > 0) {
    await supabase.from('expenses').delete().in('id', [...ids]);
  }

  // 4. ×©××™×¨×ª/×¢×“×›×•×Ÿ ×”×•×¦××•×ª
  for (const expense of expenses) {
    if (expense.dbId) {
      await supabase.from('expenses').update({...});
    } else {
      const { data } = await supabase.from('expenses').insert({...});
      expense.dbId = data.id;
    }

    // 5. ×”×¢×œ××ª ×§×‘×œ×•×ª ×—×“×©×•×ª
    for (const receipt of expense.receipts) {
      if (receipt.file) {
        await supabase.storage.from('receipts').upload(path, receipt.file);
        await supabase.from('receipts').insert({...});
      }
    }
  }
};
```

### ××™× ×“×™×§×˜×•×¨×™× ×•×™×–×•××œ×™×™×:
- ğŸŸ¡ "×©×•××¨..." - ×‘×–××Ÿ ×©××™×¨×”
- ğŸŸ¢ "× ×©××¨ ×›×˜×™×•×˜×”" - ×œ××—×¨ ×©××™×¨×”

---

## ×©×œ×‘ 7: ×”×¤×§×” ×•×©×œ×™×—×”

### ×›×¤×ª×•×¨×™×:
1. **×©××•×¨** - ×©××™×¨×” ×‘×¡×˜×˜×•×¡ `open`
2. **×”×¤×§ ×“×•×—** - ×”×¤×§×” ×•×©×œ×™×—×” ×œ××™×©×•×¨

### ×ª×”×œ×™×š ×•×œ×™×“×¦×™×”:
```typescript
const handleSave = async (saveAsDraft, closeReport) => {
  // 1. ×‘×“×™×§×ª ×¤×¨×˜×™ × ×¡×™×¢×”
  if (!tripDestination || !tripStartDate || !tripEndDate || !tripPurpose) {
    toast({ title: '×™×© ×œ××œ× ××ª ×›×œ ×¤×¨×˜×™ ×”× ×¡×™×¢×”', variant: 'destructive' });
    return;
  }

  // 2. ×‘×“×™×§×ª ×”×•×¦××•×ª (×œ×”×¤×§×”)
  if (closeReport && expenses.length === 0) {
    toast({ title: '×™×© ×œ×”×•×¡×™×£ ×œ×¤×—×•×ª ×”×•×¦××” ××—×ª', variant: 'destructive' });
    return;
  }

  // 3. ×‘×“×™×§×ª ×”×—×œ×˜×ª ××©"×œ (×œ×”×¤×§×”)
  if (closeReport && allowanceType === null) {
    toast({ title: '× ×“×¨×©×ª ×”×—×œ×˜×” ×œ×’×‘×™ ××©×´×œ', variant: 'destructive' });
    return;
  }

  // 4. ×•×œ×™×“×¦×™×” ×©×œ ×›×œ ×”×•×¦××”
  for (const expense of expenses) {
    if (!expense.expense_date) // ×—×¡×¨ ×ª××¨×™×š
    if (!expense.description) // ×—×¡×¨ ×ª×™××•×¨
    if (expense.amount <= 0) // ×¡×›×•× ×œ× ×ª×§×™×Ÿ
    if (!expense.payment_method) // ×—×¡×¨ ×××¦×¢×™ ×ª×©×œ×•×
  }
};
```

### ×§×‘×™×¢×ª ×¡×˜×˜×•×¡:
```typescript
let newStatus;
if (closeReport) {
  // ×¢×•×‘×“ ×¢× ×× ×”×œ â†’ pending_approval
  // ×× ×”×œ ××• ×¢×•×‘×“ ×œ×œ× ×× ×”×œ â†’ closed
  newStatus = (!isManager && hasManager) ? 'pending_approval' : 'closed';
} else if (saveAsDraft) {
  newStatus = 'draft';
} else {
  newStatus = 'open';
}
```

### ×©×œ×™×—×” ×œ×× ×”×œ:
```typescript
// 1. ×‘×“×™×§×” ×”×× ×™×© ×× ×”×œ
const { data: profile } = await supabase
  .from('profiles')
  .select('is_manager, manager_id')
  .eq('id', user.id);

// 2. ×× ×™×© ×× ×”×œ - ×”×¦×’×ª ×“×™××œ×•×’ ××™×©×•×¨
if (!profile.is_manager && profile.manager_id) {
  setShowManagerApprovalDialog(true);
  return;
}

// 3. ×©×œ×™×—×ª ×‘×§×©×ª ××™×©×•×¨
await supabase.functions.invoke('request-report-approval', {
  body: {
    reportId,
    managerEmail,
    managerName,
    employeeName,
    reportDetails: { destination, dates, totalAmount }
  }
});
```

### ×™×¦×™×¨×ª × ×•×˜×™×¤×™×§×¦×™×” ×œ×× ×”×œ:
```typescript
await supabase.from('notifications').insert({
  user_id: managerId,
  type: 'report_pending_approval',
  title: '×“×•×— ×”×•×¦××•×ª ×××ª×™×Ÿ ×œ××™×©×•×¨',
  message: `${employeeName} ×”×’×™×© ×“×•×— ×”×•×¦××•×ª ×œ× ×¡×™×¢×” ×œ${destination}`,
  report_id: reportId,
});
```

---

## ××‘× ×” ×”× ×ª×•× ×™×

### ×˜×‘×œ×ª reports:
```sql
CREATE TABLE reports (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id),
  trip_destination TEXT NOT NULL,
  trip_start_date DATE NOT NULL,
  trip_end_date DATE NOT NULL,
  trip_purpose TEXT NOT NULL,
  notes TEXT,
  daily_allowance DECIMAL,
  allowance_days INTEGER,
  status expense_status DEFAULT 'draft',
  total_amount_ils DECIMAL,
  submitted_at TIMESTAMP,
  approved_at TIMESTAMP,
  approved_by UUID,
  manager_approval_requested_at TIMESTAMP,
  manager_approval_token TEXT,
  manager_general_comment TEXT,
  rejection_reason TEXT,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now()
);
```

### ×˜×‘×œ×ª expenses:
```sql
CREATE TABLE expenses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  report_id UUID REFERENCES reports(id) ON DELETE CASCADE,
  expense_date DATE NOT NULL,
  category expense_category NOT NULL,
  description TEXT NOT NULL,
  amount DECIMAL NOT NULL,
  currency expense_currency DEFAULT 'USD',
  amount_in_ils DECIMAL NOT NULL,
  notes TEXT,
  payment_method payment_method DEFAULT 'out_of_pocket',
  approval_status expense_approval_status DEFAULT 'pending',
  manager_comment TEXT,
  reviewed_at TIMESTAMP,
  reviewed_by UUID,
  employee_reply TEXT,
  employee_reply_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT now()
);
```

### ×˜×‘×œ×ª receipts:
```sql
CREATE TABLE receipts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  expense_id UUID REFERENCES expenses(id) ON DELETE CASCADE,
  file_name TEXT NOT NULL,
  file_url TEXT NOT NULL,
  file_type file_type_enum NOT NULL,
  file_size INTEGER NOT NULL,
  uploaded_at TIMESTAMP DEFAULT now()
);
```

### ×˜×‘×œ×ª receipt_analysis_logs:
```sql
CREATE TABLE receipt_analysis_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID,
  report_id UUID,
  expense_id UUID,
  image_file_name TEXT,
  image_file_size INTEGER,
  extracted_date DATE,
  extracted_amount DECIMAL,
  extracted_currency TEXT,
  extracted_category TEXT,
  extracted_description TEXT,
  raw_ai_response JSONB,
  trip_destination TEXT,
  device_info TEXT,
  user_corrected_amount DECIMAL,
  user_corrected_currency TEXT,
  user_corrected_date DATE,
  user_swapped_day_month BOOLEAN,
  created_at TIMESTAMP DEFAULT now()
);
```

---

## Edge Functions

### 1. get-exchange-rates
**××˜×¨×”:** ×§×‘×œ×ª ×©×¢×¨×™ ×—×œ×™×¤×™×Ÿ ×¢×“×›× ×™×™×
**×§×œ×˜:** ×œ×œ×
**×¤×œ×˜:** `{ rates: { USD: 3.60, EUR: 3.90, ... } }`

### 2. analyze-receipt
**××˜×¨×”:** × ×™×ª×•×— ×§×‘×œ×” ×‘×××¦×¢×•×ª AI
**×§×œ×˜:** `{ imageBase64, tripDestination }`
**×¤×œ×˜:** `{ date, amount, currency, category, description }`
**××•×“×œ:** `google/gemini-2.5-flash`

### 3. request-report-approval
**××˜×¨×”:** ×©×œ×™×—×ª ×‘×§×©×ª ××™×©×•×¨ ×œ×× ×”×œ
**×§×œ×˜:** `{ reportId, managerEmail, managerName, employeeName, reportDetails }`
**×¤×¢×•×œ×•×ª:**
- ×¢×“×›×•×Ÿ ×¡×˜×˜×•×¡ ×”×“×•×— ×œ-`pending_approval`
- ×™×¦×™×¨×ª `approvalToken`
- ×©×œ×™×—×ª ××™××™×™×œ ×œ×× ×”×œ ×¢× ×§×™×©×•×¨ ×œ××™×©×•×¨
- ×™×¦×™×¨×ª × ×•×˜×™×¤×™×§×¦×™×”

### 4. approve-report
**××˜×¨×”:** ××™×©×•×¨/×“×—×™×™×ª ×“×•×— ×¢×œ ×™×“×™ ×× ×”×œ
**×§×œ×˜:** `{ reportId, token, action, reason }`

---

## ×–×¨×™××ª ×”× ×ª×•× ×™×

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ×¤×ª×™×—×ª ×“×•×— ×—×“×©                            â”‚
â”‚                    /reports/new                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ××™×œ×•×™ ×¤×¨×˜×™ × ×¡×™×¢×”                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ â€¢ ××“×™× ×ª ×”×™×¢×“ (×—×•×‘×”)                                      â”‚  â”‚
â”‚   â”‚ â€¢ ×ª××¨×™×š ×”×ª×—×œ×”/×¡×™×•× (×—×•×‘×”)                               â”‚  â”‚
â”‚   â”‚ â€¢ ××˜×¨×ª ×”× ×¡×™×¢×” (×—×•×‘×”)                                    â”‚  â”‚
â”‚   â”‚ â€¢ ×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ×”×’×“×¨×ª ××©"×œ ×™×•××™                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ â—‹ ×›×œ ×™××™ ×”× ×¡×™×¢×” (××—×•×©×‘ ××•×˜×•××˜×™×ª)                        â”‚  â”‚
â”‚   â”‚ â—‹ ××¡×¤×¨ ×™××™× ×¡×¤×¦×™×¤×™ (×”×–× ×” ×™×“× ×™×ª)                        â”‚  â”‚
â”‚   â”‚ â—‹ ×œ×œ× ××©"×œ                                              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ×”×•×¡×¤×ª ×”×•×¦××•×ª                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ×œ×›×œ ×”×•×¦××”:                                               â”‚  â”‚
â”‚   â”‚ â€¢ ×ª××¨×™×š (×—×•×‘×”)                                           â”‚  â”‚
â”‚   â”‚ â€¢ ×ª×™××•×¨ (×—×•×‘×”)                                           â”‚  â”‚
â”‚   â”‚ â€¢ ×¡×›×•× + ××˜×‘×¢ (×—×•×‘×”) â†’ ×”××¨×” ××•×˜×•××˜×™×ª ×œ×©"×—              â”‚  â”‚
â”‚   â”‚ â€¢ ×§×˜×’×•×¨×™×” (5 ××¤×©×¨×•×™×•×ª)                                  â”‚  â”‚
â”‚   â”‚ â€¢ ×××¦×¢×™ ×ª×©×œ×•× (×—×•×‘×”)                                    â”‚  â”‚
â”‚   â”‚ â€¢ ×§×‘×œ×•×ª (××•×¤×¦×™×•× ×œ×™)                                      â”‚  â”‚
â”‚   â”‚ â€¢ ×”×¢×¨×•×ª (××•×¤×¦×™×•× ×œ×™)                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ×”×¢×œ××ª ×§×‘×œ×•×ª + × ×™×ª×•×— AI                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 1. ×”×¢×œ××ª ×ª××•× ×”/PDF                                       â”‚  â”‚
â”‚   â”‚ 2. ×©×œ×™×—×” ×œ-analyze-receipt                              â”‚  â”‚
â”‚   â”‚ 3. ××™×œ×•×™ ××•×˜×•××˜×™: ×ª××¨×™×š, ×¡×›×•×, ××˜×‘×¢, ×§×˜×’×•×¨×™×”, ×ª×™××•×¨     â”‚  â”‚
â”‚   â”‚ 4. ×©××™×¨×ª ×œ×•×’ ×‘-receipt_analysis_logs                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼ (×›×œ 1.5 ×©× ×™×•×ª)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ×©××™×¨×” ××•×˜×•××˜×™×ª                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ â€¢ ×™×¦×™×¨×ª/×¢×“×›×•×Ÿ ×¨×©×•××ª reports                             â”‚  â”‚
â”‚   â”‚ â€¢ ××—×™×§×ª ×”×•×¦××•×ª ×©×”×•×¡×¨×•                                   â”‚  â”‚
â”‚   â”‚ â€¢ ×™×¦×™×¨×ª/×¢×“×›×•×Ÿ ×¨×©×•××•×ª expenses                           â”‚  â”‚
â”‚   â”‚ â€¢ ×”×¢×œ××ª ×§×‘×œ×•×ª ×—×“×©×•×ª ×œ-Storage                          â”‚  â”‚
â”‚   â”‚ â€¢ ×¢×“×›×•×Ÿ URL ×œ× ×ª×™×‘ (/reports/:id/edit)                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ×”×¤×§×” ×•×©×œ×™×—×”                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ 1. ×•×œ×™×“×¦×™×” ××œ××”                                          â”‚  â”‚
â”‚   â”‚ 2. ×‘×“×™×§×” ×”×× ×™×© ×× ×”×œ                                     â”‚  â”‚
â”‚   â”‚ 3. ×× ×›×Ÿ â†’ ×“×™××œ×•×’ ××™×©×•×¨ â†’ pending_approval               â”‚  â”‚
â”‚   â”‚    ×× ×œ× â†’ closed                                        â”‚  â”‚
â”‚   â”‚ 4. ×©×œ×™×—×ª ××™××™×™×œ ×œ×× ×”×œ                                    â”‚  â”‚
â”‚   â”‚ 5. ×™×¦×™×¨×ª × ×•×˜×™×¤×™×§×¦×™×”                                      â”‚  â”‚
â”‚   â”‚ 6. × ×™×•×•×˜ ×œ×“×£ ×¦×¤×™×™×”                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ×¡×™×›×•× ×›××•×ª×™

| ×¤×¨×™×˜ | ×›××•×ª |
|------|------|
| ×©×“×•×ª ×¤×¨×˜×™ × ×¡×™×¢×” | 5 |
| ××¤×©×¨×•×™×•×ª ××©"×œ | 3 |
| ×§×˜×’×•×¨×™×•×ª ×”×•×¦××” | 5 |
| ××˜×‘×¢×•×ª × ×ª××›×™× | 50+ |
| ×××¦×¢×™ ×ª×©×œ×•× | 2 |
| ×©×“×•×ª ×”×•×¦××” | 12 |
| Edge Functions | 4 |
| ×˜×‘×œ××•×ª DB | 4 |
| ×¡×˜×˜×•×¡×™ ×“×•×— | 4 |
